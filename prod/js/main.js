var MalinkyAjaxPaging=function(a){function n(a,n,i){var o;return function(){var t=this,e=arguments,p=function(){o=null,i||a.apply(t,e)},_=i&&!o;clearTimeout(o),o=setTimeout(p,n),_&&a.apply(t,e)}}if(0==a(malinky_ajax_paging_options.pagination_wrapper).length&&0==a(malinky_ajax_paging_options.woo_pagination_wrapper).length)return!1;var i=malinky_ajax_paging_options.is_woocommerce,o=malinky_ajax_paging_options.ajax_loader,t=malinky_ajax_paging_options.malinky_load_more,e=malinky_ajax_paging_options.malinky_load_more_button,p=parseInt(malinky_ajax_paging_options.infinite_scroll_buffer),_="",l=malinky_ajax_paging_options.loading_more_posts_text,g=malinky_ajax_paging_options.load_more_button_text,r=i?malinky_ajax_paging_options.woo_pagination_wrapper:malinky_ajax_paging_options.pagination_wrapper,s=a(document).height()-a(r).offset().top,m=malinky_ajax_paging_options.paging_type,u=i?malinky_ajax_paging_options.woo_posts_wrapper:malinky_ajax_paging_options.posts_wrapper,c=i?malinky_ajax_paging_options.woo_post_wrapper:malinky_ajax_paging_options.post_wrapper,x=parseInt(malinky_ajax_paging_options.max_num_pages),y=parseInt(malinky_ajax_paging_options.next_page_number),f=(i?malinky_ajax_paging_options.woo_next_page_selector:malinky_ajax_paging_options.next_page_selector,a(malinky_ajax_paging_options.next_page_selector).attr("href")||malinky_ajax_paging_options.next_page_url),d=function(){"infinite-scroll"==m?(j(),a(r).remove(),window.addEventListener("scroll",b)):"load-more"==m?(a(r).last().after('<div class="'+t+'"><a href="'+f+'" id="malinky-ajax-paging-button" class="'+e+'">'+g+"</a></div>"),j(),a(r+":not(:has(>a#malinky-ajax-paging-button))").remove(),a("#malinky-ajax-paging-button").click(function(a){a.preventDefault(),_=setTimeout(w,750),k()})):"pagination"==m&&(j(),a(document).on("click",r,function(a){a.preventDefault(),_=setTimeout(w,750),f=a.target.href,k()}),window.addEventListener("popstate",function(){f=document.URL,k()}))},k=function(){a.ajax({type:"GET",url:f,dataType:"html",success:function(n){var i=a.parseHTML(n),o=a(i).find(c),t=a(u+" "+c).last(),e=a(c);if(t.after(o),("infinite-scroll"==m||"load-more"==m)&&(y++,y>x&&(a("#malinky-ajax-paging-button").parent().remove(),window.removeEventListener("scroll",b)),f=f.replace(/\/page\/[0-9]*/,"/page/"+y)),"pagination"==m){e.remove(),history.pushState(null,null,f);var p=a(i).find(r);a(r).replaceWith(p)}h()},error:function(){v()},complete:function(){"pagination"==m&&a("body,html").animate({scrollTop:a(u).offset().top-150},400)}})},j=function(){a(r).last().before('<div class="malinky-ajax-paging-loading">'+o+"</div>")},w=function(){a(".malinky-ajax-paging-loading").show(),("load-more"==m||"infinite-scroll"==m)&&a("#malinky-ajax-paging-button").text(l)},h=function(){a(".malinky-ajax-paging-loading").hide(),("load-more"==m||"infinite-scroll"==m)&&a("#malinky-ajax-paging-button").text(g),clearTimeout(_)},v=function(){a(".malinky-ajax-paging-loading").hide(),clearTimeout(_)},b=n(function(){var n=a(document).height()-a(window).scrollTop()-a(window).height();s>n-p&&(_=setTimeout(w,750),k())},250);d()}(jQuery);