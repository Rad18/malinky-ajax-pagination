var MalinkyAjaxPaging=function(a){function n(a,n,i){var o;return function(){var t=this,e=arguments,p=function(){o=null,i||a.apply(t,e)},l=i&&!o;clearTimeout(o),o=setTimeout(p,n),l&&a.apply(t,e)}}var i=malinky_ajax_paging_options.is_woocommerce,o=malinky_ajax_paging_options.ajax_loader,t=parseInt(malinky_ajax_paging_options.infinite_scroll_buffer),e="",p=malinky_ajax_paging_options.loading_more_posts_text,l=malinky_ajax_paging_options.load_more_button_text,_=i?malinky_ajax_paging_options.woo_pagination_wrapper:malinky_ajax_paging_options.pagination_wrapper,g=a(document).height()-a(_).offset().top,r=malinky_ajax_paging_options.paging_type,s=i?malinky_ajax_paging_options.woo_posts_wrapper:malinky_ajax_paging_options.posts_wrapper,m=i?malinky_ajax_paging_options.woo_post_wrapper:malinky_ajax_paging_options.post_wrapper,u=parseInt(malinky_ajax_paging_options.max_num_pages),c=parseInt(malinky_ajax_paging_options.next_page_number),x=(i?malinky_ajax_paging_options.woo_next_page_selector:malinky_ajax_paging_options.next_page_selector,a(malinky_ajax_paging_options.next_page_selector).attr("href")||malinky_ajax_paging_options.next_page_url),f=function(){"infinite-scroll"==r?(d(),a(_).remove(),window.addEventListener("scroll",v)):"load-more"==r?(a(_).last().after('<a href="'+x+'" class="malinky-ajax-paging-button malinky-button">'+l+"</a>"),d(),a(_).remove(),a(".malinky-ajax-paging-button").click(function(a){a.preventDefault(),e=setTimeout(j,750),y()})):"pagination"==r&&(d(),a(document).on("click",_,function(a){a.preventDefault(),e=setTimeout(j,750),x=a.target.href,y()}),window.addEventListener("popstate",function(){x=document.URL,y()}))},y=function(){a.ajax({type:"GET",url:x,dataType:"html",success:function(n){var i=a.parseHTML(n),o=a(i).find(m),t=a(s+" "+m).last(),e=a(m);if(t.after(o),("infinite-scroll"==r||"load-more"==r)&&(c++,c>u&&(a(".malinky-ajax-paging-button").remove(),window.removeEventListener("scroll",v)),x=x.replace(/\/page\/[0-9]*/,"/page/"+c)),"pagination"==r){e.remove(),history.pushState(null,null,x);var p=a(i).find(_);a(_).replaceWith(p)}k()},error:function(){w()},complete:function(){"pagination"==r&&a("body,html").animate({scrollTop:a(s).offset().top-150},400)}})},d=function(){a(_).last().before('<div class="malinky-ajax-paging-loading">'+o+"</div>")},j=function(){a(".malinky-ajax-paging-loading").show(),("load-more"==r||"infinite-scroll"==r)&&a(".malinky-ajax-paging-button").text(p)},k=function(){a(".malinky-ajax-paging-loading").hide(),("load-more"==r||"infinite-scroll"==r)&&a(".malinky-ajax-paging-button").text(l),clearTimeout(e)},w=function(){a(".malinky-ajax-paging-loading").hide(),clearTimeout(e)},v=n(function(){var n=a(document).height()-a(window).scrollTop()-a(window).height();g>n-t&&(e=setTimeout(j,750),y())},250);f()}(jQuery);