var MalinkyAjaxPaging=function(t){var a=function(){function a(t,a,n){var i;return function(){var e=this,o=arguments,r=function(){i=null,n||t.apply(e,o)},p=n&&!i;clearTimeout(i),i=setTimeout(r,a),p&&t.apply(e,o)}}var n=p,i=l,e=s,o=m,r=c,h=d,v=u,x=y,j=k,b=f,T=_,L=S,E=w,I=!1,D=function(){t.ajax({type:"GET",url:L,dataType:"html",success:function(a){var n=t.parseHTML(a),i=(t(n).find(x),1),e=0;for(var o in malinkySettings)t(n).find(malinkySettings[o].posts_wrapper).length&&t(n).find(malinkySettings[o].post_wrapper).length&&t(n).find(malinkySettings[o].pagination_wrapper).length&&(1==t(n).find(malinkySettings[o].posts_wrapper).length?e++:t(n).find(malinkySettings[o].posts_wrapper).each(function(t){e++}));for(var o in malinkySettings)t(n).find(malinkySettings[o].posts_wrapper).length&&t(n).find(malinkySettings[o].post_wrapper).length&&t(n).find(malinkySettings[o].pagination_wrapper).length&&(1==e?(t(n).find(malinkySettings[o].posts_wrapper).attr("data-paginator-count",i),t(n).find(malinkySettings[o].pagination_wrapper).attr("data-paginator-count",i)):1==t(n).find(malinkySettings[o].posts_wrapper).length?(t(n).find(malinkySettings[o].posts_wrapper).attr("data-paginator-count",i),t(n).find(malinkySettings[o].posts_wrapper+" "+malinkySettings[o].pagination_wrapper).attr("data-paginator-count",i),i++):t(n).find(malinkySettings[o].posts_wrapper).each(function(a){t(this).attr("data-paginator-count",i),t(this).find(malinkySettings[o].pagination_wrapper).attr("data-paginator-count",i),i++}));var p=t(n).find(x+'[data-paginator-count="'+E+'"] '+j),l=t(x+'[data-paginator-count="'+E+'"] '+j).last(),g=t(x+'[data-paginator-count="'+E+'"] '+j);if(l.after(p),"infinite-scroll"!=v&&"load-more"!=v||(T++,T>b&&(t('#malinky-ajax-pagination-button[data-paginator-count="'+E+'"]').parent().remove(),window.removeEventListener("scroll",P)),L=L.replace(/\/page\/[0-9]*/,"/page/"+T)),"pagination"==v){g.remove(),history.pushState(null,null,L);var s=t(n).find(r+'[data-paginator-count="'+E+'"]').first();t(r+'[data-paginator-count="'+E+'"]').replaceWith(s)}G()},error:function(t,a){H()},complete:function(){"pagination"==v&&t("body,html").animate({scrollTop:t(x+'[data-paginator-count="'+E+'"]').offset().top-150},400),"infinite-scroll"==v&&(I=!1)}})},M=function(){t(r+'[data-paginator-count="'+E+'"]').last().before('<div class="malinky-ajax-pagination-loading" data-paginator-count="'+E+'">'+n+"</div>")},A=function(){t('.malinky-ajax-pagination-loading[data-paginator-count="'+E+'"]').show(),"load-more"!=v&&"infinite-scroll"!=v||t('#malinky-ajax-pagination-button[data-paginator-count="'+E+'"]').text(e)},G=function(){t('.malinky-ajax-pagination-loading[data-paginator-count="'+E+'"]').hide(),"load-more"!=v&&"infinite-scroll"!=v||t('#malinky-ajax-pagination-button[data-paginator-count="'+E+'"]').text(o),clearTimeout(g)},H=function(){t('.malinky-ajax-pagination-loading[data-paginator-count="'+E+'"]').hide(),clearTimeout(g)},P=a(function(){if(!I){var a=t(document).height()-t(window).scrollTop()-t(window).height();h>a-i&&(I=!0,A(),D())}},250);"infinite-scroll"==v?(M(),t(r+'[data-paginator-count="'+E+'"]').remove(),window.addEventListener("scroll",P)):"load-more"==v?(t(r+'[data-paginator-count="'+E+'"]').last().after('<div class="malinky-load-more"><a href="'+L+'" id="malinky-ajax-pagination-button" class="malinky-load-more__button" data-paginator-count="'+E+'">'+m+"</a></div>"),M(),t(r+'[data-paginator-count="'+E+'"]:not(:has(>a#malinky-ajax-pagination-button[data-paginator-count="'+E+'"]))').remove(),t('#malinky-ajax-pagination-button[data-paginator-count="'+E+'"]').click(function(t){t.preventDefault(),g=setTimeout(A,750),D()})):"pagination"==v&&(M(),t(document).on("click",r+'[data-paginator-count="'+E+'"]',function(t){t.preventDefault(),g=setTimeout(A,750),L=t.target.href,D()}),window.addEventListener("popstate",function(t){L=document.URL,D()}))},n=0,e=1,o=0;for(var r in malinkySettings)t(malinkySettings[r].posts_wrapper).length&&t(malinkySettings[r].post_wrapper).length&&t(malinkySettings[r].pagination_wrapper).length&&t(malinkySettings[r].next_page_selector).length&&(1==t(malinkySettings[r].posts_wrapper).length?o++:t(malinkySettings[r].posts_wrapper).each(function(t){o++}));for(var r in malinkySettings)if(t(malinkySettings[r].posts_wrapper).length&&t(malinkySettings[r].post_wrapper).length&&t(malinkySettings[r].pagination_wrapper).length&&t(malinkySettings[r].next_page_selector).length)for(1==o?(t(malinkySettings[r].posts_wrapper).attr("data-paginator-count",e),t(malinkySettings[r].pagination_wrapper).attr("data-paginator-count",e)):1==t(malinkySettings[r].posts_wrapper).length?(t(malinkySettings[r].posts_wrapper).attr("data-paginator-count",e),t(malinkySettings[r].posts_wrapper+" "+malinkySettings[r].pagination_wrapper).attr("data-paginator-count",e),e++):t(malinkySettings[r].posts_wrapper).each(function(a){t(this).attr("data-paginator-count",e),t(this).find(malinkySettings[r].pagination_wrapper).attr("data-paginator-count",e),e++}),i=1;i<=t(malinkySettings[r].posts_wrapper).length;i++){var p=malinkySettings[r].ajax_loader,l=(malinkySettings[r].malinky_load_more,malinkySettings[r].malinky_load_more_button,parseInt(malinkySettings[r].infinite_scroll_buffer)),g="",s=malinkySettings[r].loading_more_posts_text,m=malinkySettings[r].load_more_button_text,c=malinkySettings[r].pagination_wrapper,d=t(document).height()-t(c).offset().top,u=malinkySettings[r].paging_type,y=malinkySettings[r].posts_wrapper,k=malinkySettings[r].post_wrapper,f=parseInt(malinkySettings.max_num_pages),_=parseInt(malinkySettings.next_page_number),S=(malinkySettings[r].next_page_selector,t(malinkySettings[r].next_page_selector).attr("href")||malinkySettings.next_page_url),w=++n;a()}}(jQuery);