var MalinkyAjaxPaging=function(t){var a=function(){function a(t,a,n){var i;return function(){var e=this,o=arguments,r=function(){i=null,n||t.apply(e,o)},p=n&&!i;clearTimeout(i),i=setTimeout(r,a),p&&t.apply(e,o)}}var n=p,i=l,e=s,o=m,r=c,h=d,v=u,x=y,j=k,b=f,T=_,E=S,L=w,I=!1,R=function(){t.ajax({type:"GET",url:E,dataType:"html",success:function(a){var n=t.parseHTML(a),i=(t(n).find(x),1),e=0;for(var o in malinkySettings)t(n).find(malinkySettings[o].posts_wrapper).length&&t(n).find(malinkySettings[o].post_wrapper).length&&t(n).find(malinkySettings[o].pagination_wrapper).length&&(1==t(n).find(malinkySettings[o].posts_wrapper).length?e++:t(n).find(malinkySettings[o].posts_wrapper).each(function(t){e++}));for(var o in malinkySettings)t(n).find(malinkySettings[o].posts_wrapper).length&&t(n).find(malinkySettings[o].post_wrapper).length&&t(n).find(malinkySettings[o].pagination_wrapper).length&&(1==e?(t(n).find(malinkySettings[o].posts_wrapper).attr("data-paginator-count",i),t(n).find(malinkySettings[o].pagination_wrapper).attr("data-paginator-count",i)):1==t(n).find(malinkySettings[o].posts_wrapper).length?(t(n).find(malinkySettings[o].posts_wrapper).attr("data-paginator-count",i),t(n).find(malinkySettings[o].posts_wrapper+" "+malinkySettings[o].pagination_wrapper).attr("data-paginator-count",i),i++):t(n).find(malinkySettings[o].posts_wrapper).each(function(a){t(this).attr("data-paginator-count",i),t(this).find(malinkySettings[o].pagination_wrapper).attr("data-paginator-count",i),i++}));var p=t(n).find(x+'[data-paginator-count="'+L+'"] '+j),l=t(x+'[data-paginator-count="'+L+'"] '+j).last(),g=t(x+'[data-paginator-count="'+L+'"] '+j);if(l.after(p),"infinite-scroll"==v||"load-more"==v)if(T++,1==e)T>b&&(t('#malinky-ajax-pagination-button[data-paginator-count="'+L+'"]').parent().remove(),window.removeEventListener("scroll",H)),E=E.replace(/\/page\/[0-9]*/,"/page/"+T);else{var s=new RegExp("paged"+L+"max\\=[0-9]*"),m=E.match(s)[0];m=m.split("=")[1],T>m&&(t('#malinky-ajax-pagination-button[data-paginator-count="'+L+'"]').parent().remove(),window.removeEventListener("scroll",H));var c=new RegExp("\\?paged"+L+"\\=[0-9]*");E=E.replace(c,"?paged"+L+"="+T)}if("pagination"==v){g.remove(),history.pushState(null,null,E);var d=t(n).find(r+'[data-paginator-count="'+L+'"]').first();t(r+'[data-paginator-count="'+L+'"]').replaceWith(d)}A()},error:function(t,a){G()},complete:function(){"pagination"==v&&t("body,html").animate({scrollTop:t(x+'[data-paginator-count="'+L+'"]').offset().top-150},400),"infinite-scroll"==v&&(I=!1)}})},D=function(){t(r+'[data-paginator-count="'+L+'"]').last().before('<div class="malinky-ajax-pagination-loading" data-paginator-count="'+L+'">'+n+"</div>")},M=function(){t('.malinky-ajax-pagination-loading[data-paginator-count="'+L+'"]').show(),"load-more"!=v&&"infinite-scroll"!=v||t('#malinky-ajax-pagination-button[data-paginator-count="'+L+'"]').text(e)},A=function(){t('.malinky-ajax-pagination-loading[data-paginator-count="'+L+'"]').hide(),"load-more"!=v&&"infinite-scroll"!=v||t('#malinky-ajax-pagination-button[data-paginator-count="'+L+'"]').text(o),clearTimeout(g)},G=function(){t('.malinky-ajax-pagination-loading[data-paginator-count="'+L+'"]').hide(),clearTimeout(g)},H=a(function(){if(!I){var a=t(document).height()-t(window).scrollTop()-t(window).height();h>a-i&&(I=!0,M(),R())}},250);"infinite-scroll"==v?(D(),t(r+'[data-paginator-count="'+L+'"]').remove(),window.addEventListener("scroll",H)):"load-more"==v?(t(r+'[data-paginator-count="'+L+'"]').last().after('<div class="malinky-load-more"><a href="'+E+'" id="malinky-ajax-pagination-button" class="malinky-load-more__button" data-paginator-count="'+L+'">'+m+"</a></div>"),D(),t(r+'[data-paginator-count="'+L+'"]:not(:has(>a#malinky-ajax-pagination-button[data-paginator-count="'+L+'"]))').remove(),t('#malinky-ajax-pagination-button[data-paginator-count="'+L+'"]').click(function(t){t.preventDefault(),g=setTimeout(M,750),R()})):"pagination"==v&&(D(),t(document).on("click",r+'[data-paginator-count="'+L+'"]',function(t){t.preventDefault(),g=setTimeout(M,750),E=t.target.href,R()}),window.addEventListener("popstate",function(t){E=document.URL,R()}))},n=0,e=1,o=0;for(var r in malinkySettings)t(malinkySettings[r].posts_wrapper).length&&t(malinkySettings[r].post_wrapper).length&&t(malinkySettings[r].pagination_wrapper).length&&t(malinkySettings[r].next_page_selector).length&&(1==t(malinkySettings[r].posts_wrapper).length?o++:t(malinkySettings[r].posts_wrapper).each(function(t){o++}));for(var r in malinkySettings)if(t(malinkySettings[r].posts_wrapper).length&&t(malinkySettings[r].post_wrapper).length&&t(malinkySettings[r].pagination_wrapper).length&&t(malinkySettings[r].next_page_selector).length)for(1==o?(t(malinkySettings[r].posts_wrapper).attr("data-paginator-count",e),t(malinkySettings[r].pagination_wrapper).attr("data-paginator-count",e)):1==t(malinkySettings[r].posts_wrapper).length?(t(malinkySettings[r].posts_wrapper).attr("data-paginator-count",e),t(malinkySettings[r].posts_wrapper+" "+malinkySettings[r].pagination_wrapper).attr("data-paginator-count",e),e++):t(malinkySettings[r].posts_wrapper).each(function(a){t(this).attr("data-paginator-count",e),t(this).find(malinkySettings[r].pagination_wrapper).attr("data-paginator-count",e),e++}),i=1;i<=t(malinkySettings[r].posts_wrapper).length;i++){var p=malinkySettings[r].ajax_loader,l=(malinkySettings[r].malinky_load_more,malinkySettings[r].malinky_load_more_button,parseInt(malinkySettings[r].infinite_scroll_buffer)),g="",s=malinkySettings[r].loading_more_posts_text,m=malinkySettings[r].load_more_button_text,c=malinkySettings[r].pagination_wrapper,d=t(document).height()-t(c).offset().top,u=malinkySettings[r].paging_type,y=malinkySettings[r].posts_wrapper,k=malinkySettings[r].post_wrapper,f=parseInt(malinkySettings.max_num_pages),_=parseInt(malinkySettings.next_page_number),S=(malinkySettings[r].next_page_selector,t(malinkySettings[r].next_page_selector).attr("href")||malinkySettings.next_page_url),w=++n;a()}}(jQuery);