var MalinkyAjaxPaging=function(n){function t(n,t,a){var i;return function(){var e=this,o=arguments,l=function(){i=null,a||n.apply(e,o)},r=a&&!i;clearTimeout(i),i=setTimeout(l,t),r&&n.apply(e,o)}}for(var a in malinkySettings)if(n(malinkySettings[a].posts_wrapper).length&&n(malinkySettings[a].post_wrapper).length&&n(malinkySettings[a].pagination_wrapper).length&&n(malinkySettings[a].pagination_wrapper).length)var i=malinkySettings[a].ajax_loader,e=(malinkySettings[a].malinky_load_more,malinkySettings[a].malinky_load_more_button,parseInt(malinkySettings[a].infinite_scroll_buffer)),o="",l=malinkySettings[a].loading_more_posts_text,r=malinkySettings[a].load_more_button_text,g=malinkySettings[a].pagination_wrapper,s=n(document).height()-n(g).offset().top,m=malinkySettings[a].paging_type,p=malinkySettings[a].posts_wrapper,u=malinkySettings[a].post_wrapper,c=parseInt(malinkySettings.max_num_pages),y=parseInt(malinkySettings.next_page_number),f=(malinkySettings[a].next_page_selector,n(malinkySettings[a].next_page_selector).attr("href")||malinkySettings.next_page_url);var d=function(){"infinite-scroll"==m?(_(),n(g).remove(),window.addEventListener("scroll",S)):"load-more"==m?(n(g).last().after('<div class="malinky-load-more"><a href="'+f+'" id="malinky-ajax-paging-button" class="malinky-load-more__button">'+r+"</a></div>"),_(),n(g+":not(:has(>a#malinky-ajax-paging-button))").remove(),n("#malinky-ajax-paging-button").click(function(n){n.preventDefault(),o=setTimeout(h,750),k()})):"pagination"==m&&(_(),n(document).on("click",g,function(n){n.preventDefault(),o=setTimeout(h,750),f=n.target.href,k()}),window.addEventListener("popstate",function(n){f=document.URL,k()}))},k=function(){n.ajax({type:"GET",url:f,dataType:"html",success:function(t){var a=n.parseHTML(t),i=n(a).find(u),e=n(p+" "+u).last(),o=n(u);if(e.after(i),("infinite-scroll"==m||"load-more"==m)&&(y++,y>c&&(n("#malinky-ajax-paging-button").parent().remove(),window.removeEventListener("scroll",S)),f=f.replace(/\/page\/[0-9]*/,"/page/"+y)),"pagination"==m){o.remove(),history.pushState(null,null,f);var l=n(a).find(g);n(g).replaceWith(l)}v()},error:function(n,t){x()},complete:function(){"pagination"==m&&n("body,html").animate({scrollTop:n(p).offset().top-150},400)}})},_=function(){n(g).last().before('<div class="malinky-ajax-paging-loading">'+i+"</div>")},h=function(){n(".malinky-ajax-paging-loading").show(),("load-more"==m||"infinite-scroll"==m)&&n("#malinky-ajax-paging-button").text(l)},v=function(){n(".malinky-ajax-paging-loading").hide(),("load-more"==m||"infinite-scroll"==m)&&n("#malinky-ajax-paging-button").text(r),clearTimeout(o)},x=function(){n(".malinky-ajax-paging-loading").hide(),clearTimeout(o)},S=t(function(){var t=n(document).height()-n(window).scrollTop()-n(window).height();s>t-e&&(h(),k())},250);d()}(jQuery);