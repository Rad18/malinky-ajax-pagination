var MalinkyAjaxPaging=function(a){var t=function(){function t(a,t,n){var i;return function(){var o=this,e=arguments,r=function(){i=null,n||a.apply(o,e)},p=n&&!i;clearTimeout(i),i=setTimeout(r,t),p&&a.apply(o,e)}}var n=p,i=l,e=s,r=c,w=u,v=m,x=d,j=y,b=f,T=k,L=_,q=S,E=h,I=function(){a.ajax({type:"GET",url:q,dataType:"html",success:function(t){var n=a.parseHTML(t),i=(a(n).find(j),1);for(var e in malinkySettings)if(a(malinkySettings[e].posts_wrapper).length)if(1==a(n).find(malinkySettings[e].posts_wrapper).length)a(n).find(malinkySettings[e].posts_wrapper).attr("data-paginator-count",i),a(n).find(malinkySettings[e].pagination_wrapper).eq(0).attr("data-paginator-count",i),i++;else{var r=0;a(n).find(malinkySettings[e].posts_wrapper).each(function(t){a(this).attr("data-paginator-count",i),a(malinkySettings[e].pagination_wrapper).eq(r).attr("data-paginator-count",o),r++,i++})}var p=a(n).find(j+'[data-paginator-count="'+E+'"] '+b),l=a(j+'[data-paginator-count="'+E+'"] '+b).last(),g=a(j+'[data-paginator-count="'+E+'"] '+b);if(l.after(p),"infinite-scroll"!=x&&"load-more"!=x||(L++,L>T&&(a('#malinky-ajax-pagination-button[data-paginator-count="'+E+'"]').parent().remove(),window.removeEventListener("scroll",H)),q=q.replace(/\/page\/[0-9]*/,"/page/"+L)),"pagination"==x){g.remove(),history.pushState(null,null,q);var s=a(n).find(w+'[data-paginator-count="'+E+'"]');a(w+'[data-paginator-count="'+E+'"]').replaceWith(s)}A()},error:function(a,t){G()},complete:function(){"pagination"==x&&a("body,html").animate({scrollTop:a(j+'[data-paginator-count="'+E+'"]').offset().top-150},400)}})},D=function(){a(w+'[data-paginator-count="'+E+'"]').last().before('<div class="malinky-ajax-pagination-loading" data-paginator-count="'+E+'">'+n+"</div>")},M=function(){a('.malinky-ajax-pagination-loading[data-paginator-count="'+E+'"]').show(),"load-more"!=x&&"infinite-scroll"!=x||a('#malinky-ajax-pagination-button[data-paginator-count="'+E+'"]').text(e)},A=function(){a('.malinky-ajax-pagination-loading[data-paginator-count="'+E+'"]').hide(),"load-more"!=x&&"infinite-scroll"!=x||a('#malinky-ajax-pagination-button[data-paginator-count="'+E+'"]').text(r),clearTimeout(g)},G=function(){a('.malinky-ajax-pagination-loading[data-paginator-count="'+E+'"]').hide(),clearTimeout(g)},H=t(function(){var t=a(document).height()-a(window).scrollTop()-a(window).height();v>t-i&&(M(),I())},250);"infinite-scroll"==x?(D(),a(w+'[data-paginator-count="'+E+'"]').remove(),window.addEventListener("scroll",H)):"load-more"==x?(a(w+'[data-paginator-count="'+E+'"]').last().after('<div class="malinky-load-more"><a href="'+q+'" id="malinky-ajax-pagination-button" class="malinky-load-more__button" data-paginator-count="'+E+'">'+c+"</a></div>"),D(),a(w+'[data-paginator-count="'+E+'"]:not(:has(>a#malinky-ajax-pagination-button[data-paginator-count="'+E+'"]))').remove(),a('#malinky-ajax-pagination-button[data-paginator-count="'+E+'"]').click(function(a){a.preventDefault(),g=setTimeout(M,750),I()})):"pagination"==x&&(D(),a(document).on("click",w+'[data-paginator-count="'+E+'"]',function(a){a.preventDefault(),g=setTimeout(M,750),q=a.target.href,I()}),window.addEventListener("popstate",function(a){q=document.URL,I()}))},n=0,o=1;for(var e in malinkySettings)if(a(malinkySettings[e].posts_wrapper).length&&a(malinkySettings[e].post_wrapper).length&&a(malinkySettings[e].pagination_wrapper).length&&a(malinkySettings[e].next_page_selector).length){if(1==a(malinkySettings[e].posts_wrapper).length)a(malinkySettings[e].posts_wrapper).attr("data-paginator-count",o),a(malinkySettings[e].pagination_wrapper).eq(0).attr("data-paginator-count",o),o++;else{var r=0;a(malinkySettings[e].posts_wrapper).each(function(t){a(this).attr("data-paginator-count",o),a(malinkySettings[e].pagination_wrapper).eq(r).attr("data-paginator-count",o),r++,o++})}for(i=1;i<=a(malinkySettings[e].posts_wrapper).length;i++){var p=malinkySettings[e].ajax_loader,l=(malinkySettings[e].malinky_load_more,malinkySettings[e].malinky_load_more_button,parseInt(malinkySettings[e].infinite_scroll_buffer)),g="",s=malinkySettings[e].loading_more_posts_text,c=malinkySettings[e].load_more_button_text,u=malinkySettings[e].pagination_wrapper,m=a(document).height()-a(u).offset().top,d=malinkySettings[e].paging_type,y=malinkySettings[e].posts_wrapper,f=malinkySettings[e].post_wrapper,k=parseInt(malinkySettings.max_num_pages),_=parseInt(malinkySettings.next_page_number),S=(malinkySettings[e].next_page_selector,a(malinkySettings[e].next_page_selector).attr("href")||malinkySettings.next_page_url),h=++n;t()}}}(jQuery);